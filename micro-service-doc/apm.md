应用性能管理

## 数据采集
采用类似 Agent 的方式，在客户端上植入 SDK，由 SDK 负责采集信息。经过采样之后，通过一个固定的接口，定期发送给服务端

采集的数据构成：
系统部分：包括数据协议的版本号，以及消息头、端消息体、业务消息体的长度
消息头：主要包括应用的标识，消息生成的时间戳，消息的签名以及消息体加密的秘钥
端消息体：主要存储客户端的一些相关信息，主要有客户端版本号、SDK 版本号、IDFA、IDFV、IMEI、机器型号、渠道号、运营商、网络类型、操作系统类型、国家、地区、经纬度等等。由于这些信息有些比较敏感，一般会对信息加密
业务消息体：真正要采集的数据，这些数据也需要加密

加密方法：
1. 首先分配给这个应用，一对 RSA 公钥和私钥
2. 然后 SDK 在启动的时候，先请求一个策略服务，获取 RSA 公钥。在加密时，客户端会随机生成一个对称加密的秘钥 Key
3. 客户端使用 RSA 的公钥对秘钥加密，存储在消息头里面，然后 APM 通道服务使用 RSA 秘钥，解密得到秘钥，就可以解密得到端消息体和业务消息体的内容了
4. 最后，把消息头、端消息体、业务消息体还有消息头中的时间戳组装起来，用 MD5 生成摘要后，存储在消息头中。这样，APM 通道服务在接收到消息后，可以使用同样的算法生成摘要，并且与发送过来的摘要比对，以防止消息被篡改

